<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 25 章 C标准库</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C编程一站式学习" /><link rel="up" href="pt02.html" title="部分 II. C语言本质" /><link rel="prev" href="ch24s06.html" title="6. 可变参数" /><link rel="next" href="ch25s01.html" title="1. 字符串操作函数" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 25 章 C标准库</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch24s06.html">上一页</a> </td><th width="60%" align="center">部分 II. C语言本质</th><td width="20%" align="right"> <a accesskey="n" href="ch25s01.html">下一页</a></td></tr></table><hr /></div><div class="chapter" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a id="id2827083"></a>第 25 章 C标准库</h2></div></div></div><div class="toc"><p><b>目录</b></p><dl><dt><span class="sect1"><a href="ch25s01.html">1. 字符串操作函数</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch25s01.html#id2827594">1.1. 初始化字符串</a></span></dt><dt><span class="sect2"><a href="ch25s01.html#id2827671">1.2. 取字符串的长度</a></span></dt><dt><span class="sect2"><a href="ch25s01.html#id2827741">1.3. 拷贝字符串</a></span></dt><dt><span class="sect2"><a href="ch25s01.html#id2828376">1.4. 连接字符串</a></span></dt><dt><span class="sect2"><a href="ch25s01.html#id2828656">1.5. 比较字符串</a></span></dt><dt><span class="sect2"><a href="ch25s01.html#id2828881">1.6. 搜索字符串</a></span></dt><dt><span class="sect2"><a href="ch25s01.html#id2829046">1.7. 分割字符串</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch25s02.html">2. 标准I/O库函数</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch25s02.html#id2829671">2.1. 文件的基本概念</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2829869">2.2. fopen/fclose</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2830485">2.3. stdin/stdout/stderr</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2830807">2.4. errno与perror函数</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2831236">2.5. 以字节为单位的I/O函数</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2831814">2.6. 操作读写位置的函数</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2832034">2.7. 以字符串为单位的I/O函数</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2832480">2.8. 以记录为单位的I/O函数</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2832755">2.9. 格式化I/O函数</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2834346">2.10. C标准库的I/O缓冲区</a></span></dt><dt><span class="sect2"><a href="ch25s02.html#id2834904">2.11. 本节综合练习</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch25s03.html">3. 数值字符串转换函数</a></span></dt><dt><span class="sect1"><a href="ch25s04.html">4. 分配内存的函数</a></span></dt></dl></div><p>在前面的各章中我们已经见过C标准库的一些用法，总结如下：</p><div class="itemizedlist"><ul type="disc"><li><p>我们最常用的是包含<code class="literal">stdio.h</code>，使用其中声明的<code class="literal">printf</code>函数，这个函数在<code class="literal">libc</code>中实现，程序在运行时要动态链接<code class="literal">libc</code>共享库。</p></li><li><p>在<a class="xref" href="ch03s01.html#func.mathfunc">第 1 节 “数学函数”</a>中用到了<code class="literal">math.h</code>中声明的<code class="literal">sin</code>和<code class="literal">log</code>函数，使用这些函数需要动态链接<code class="literal">libm</code>共享库。</p></li><li><p>在<a class="xref" href="ch08s02.html#array.statistic">第 2 节 “数组应用实例：统计随机数”</a>中用到了<code class="literal">stdlib.h</code>中声明的<code class="literal">rand</code>函数，还提到了这个头文件中定义的<code class="literal">RAND_MAX</code>常量，在<a class="xref" href="ch08s05.html#array.scissor">例 8.5 “剪刀石头布”</a>中用到了<code class="literal">stdlib.h</code>中声明的<code class="literal">srand</code>函数和<code class="literal">time.h</code>中声明的<code class="literal">time</code>函数。使用这些函数需要动态链接<code class="literal">libc</code>共享库。</p></li><li><p>在<a class="xref" href="ch19s02.html#asmc.main">第 2 节 “<code class="literal">main</code>函数和启动例程”</a>中用到了<code class="literal">stdlib.h</code>中声明的<code class="literal">exit</code>函数，使用这个函数需要动态链接<code class="literal">libc</code>共享库。</p></li><li><p>在<a class="xref" href="ch11s06.html#sortsearch.binary">第 6 节 “折半查找”</a>中用到了<code class="literal">assert.h</code>中定义的<code class="literal">assert</code>宏，在<a class="xref" href="ch21s04.html#prep.other">第 4 节 “其它预处理特性”</a>中我们看到了这个宏的一种实现，它的实现需要调用<code class="literal">stdio.h</code>和<code class="literal">stdlib.h</code>中声明的函数，所以使用这个宏也需要动态链接<code class="literal">libc</code>共享库。</p></li><li><p>在<a class="xref" href="ch16s02.html#op.sizeoftypedef">第 2.4 节 “sizeof运算符与typedef类型声明”</a>中提到了<code class="literal">size_t</code>类型在<code class="literal">stddef.h</code>中定义，在<a class="xref" href="ch23s01.html#pointer.intro">第 1 节 “指针的基本概念”</a>中提到了<code class="literal">NULL</code>指针也在<code class="literal">stddef.h</code>中定义。</p></li><li><p>在<a class="xref" href="ch24s01.html#interface.prereq">第 1 节 “本章的预备知识”</a>中介绍了<code class="literal">stdlib.h</code>中声明的<code class="literal">malloc</code>和<code class="literal">free</code>函数以及<code class="literal">string.h</code>中声明的<code class="literal">strcpy</code>和<code class="literal">strncpy</code>函数，使用这些函数需要动态链接<code class="literal">libc</code>共享库。</p></li><li><p>在<a class="xref" href="ch24s06.html#interface.va">第 6 节 “可变参数”</a>中介绍了<code class="literal">stdarg.h</code>中定义的<code class="literal">va_list</code>类型和<code class="literal">va_arg</code>、<code class="literal">va_start</code>、<code class="literal">va_end</code>等宏定义，并给出了一种实现，这些宏定义的实现并没有调用库函数，所以不依赖于某个共享库，这一点和<code class="literal">assert</code>不同。</p></li></ul></div><p>总结一下，Linux平台提供的C标准库包括：</p><div class="itemizedlist"><ul type="disc"><li><p>一组头文件，定义了很多类型和宏，声明了很多库函数。这些头文件放在哪些目录下取决于不同的编译器，在我的系统上，<code class="literal">stdarg.h</code>和<code class="literal">stddef.h</code>位于<code class="literal">/usr/lib/gcc/i486-linux-gnu/4.3.2/include</code>目录下，<code class="literal">stdio.h</code>、<code class="literal">stdlib.h</code>、<code class="literal">time.h</code>、<code class="literal">math.h</code>、<code class="literal">assert.h</code>位于<code class="literal">/usr/include</code>目录下。C99标准定义的头文件有24个，本书只介绍其中最基本、最常用的几个。</p></li><li><p>一组库文件，提供了库函数的实现。大多数库函数在<code class="literal">libc</code>共享库中，有些库函数在另外的共享库中，例如数学函数在<code class="literal">libm</code>中。在<a class="xref" href="ch20s04.html#link.shared">第 4 节 “共享库”</a>讲过，通常<code class="literal">libc</code>共享库是<code class="literal">/lib/libc.so.6</code>，而我的系统启用了hwcap机制，<code class="literal">libc</code>共享库是<code class="literal">/lib/tls/i686/cmov/libc.so.6</code>。</p></li></ul></div><p>本章介绍另外一些最基本和最常用的库函数（包括一些不属于C标准但在UNIX平台上很常用的函数），写这一章是为了介绍字符串操作和文件操作的基本概念，而不是为了写一本C标准库函数的参考手册，Man Page已经是一本很好的手册了，读者学完这一章之后在开发时应该查阅Man Page，而不是把我这一章当参考手册来翻，所以本章不会面面俱到介绍所有的库函数，对于本章讲到的函数有些也不会讲得很细，因为我假定读者经过上一章的学习再结合我讲过的基本概念已经能看懂相关的Man Page了。很多技术书的作者给自己的书太多定位，既想写成一本入门教程，又想写成一本参考手册，我觉得这样不好，读者过于依赖技术书就失去了看真正的手册的能力。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch24s06.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="pt02.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="ch25s01.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">6. 可变参数 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 1. 字符串操作函数</td></tr></table></div></body></html>
