<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 27 章 本阶段总结</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C编程一站式学习" /><link rel="up" href="pt02.html" title="部分 II. C语言本质" /><link rel="prev" href="ch26s03.html" title="3. 哈希表" /><link rel="next" href="pt03.html" title="部分 III. Linux系统编程" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 27 章 本阶段总结</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch26s03.html">上一页</a> </td><th width="60%" align="center">部分 II. C语言本质</th><td width="20%" align="right"> <a accesskey="n" href="pt03.html">下一页</a></td></tr></table><hr /></div><div class="chapter" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a id="id2848940"></a>第 27 章 本阶段总结</h2></div></div></div><p>在这一阶段我们又学习了很多新的语法规则，首先读者应该回到<a class="xref" href="ch13.html#summary1">第 13 章 <i>本阶段总结</i></a>把那些知识点重新总结一遍。然后我们总结一下各种开发调试工具的用法。</p><p>1、gcc</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">-c</code></span></dt><dd><p>编译生成目标文件（Relocatable），详见<a class="xref" href="ch19s02.html#asmc.main">第 2 节 “<code class="literal">main</code>函数和启动例程”</a>。</p></dd><dt><span class="term"><code class="literal">-Dmacro[=defn]</code></span></dt><dd><p>定义一个宏，详见<a class="xref" href="ch21s03.html#prep.cond">第 3 节 “条件预处理指示”</a>。</p></dd><dt><span class="term"><code class="literal">-E</code></span></dt><dd><p>只做预处理而不编译，<code class="literal">cpp</code>命令也可以达到同样的效果，详见<a class="xref" href="ch21s02.html#prep.funcmacro">第 2.1 节 “函数式宏定义”</a>。</p></dd><dt><span class="term"><code class="literal">-g</code></span></dt><dd><p>在生成的目标文件中添加调试信息，所谓调试信息就是源代码和指令之间的对应关系，在<code class="literal">gdb</code>调试和<code class="literal">objdump</code>反汇编时要用到这些信息，详见<a class="xref" href="ch10s01.html#gdb.step">第 1 节 “单步执行和跟踪函数调用”</a>。</p></dd><dt><span class="term"><code class="literal">-Idir</code></span></dt><dd><p><code class="literal">dir</code>是头文件所在的目录，详见<a class="xref" href="ch20s02.html#link.header">第 2.2 节 “头文件”</a>。</p></dd><dt><span class="term"><code class="literal">-Ldir</code></span></dt><dd><p><code class="literal">dir</code>是库文件所在的目录，详见<a class="xref" href="ch20s03.html#link.staticlib">第 3 节 “静态库”</a>。</p></dd><dt><span class="term"><code class="literal">-M</code>和<code class="literal">-MM</code></span></dt><dd><p>输出“<span class="quote"><code class="literal">.o</code>文件: <code class="literal">.c</code>文件 <code class="literal">.h</code>文件</span>”这种形式的Makefile规则，<code class="literal">-MM</code>的输出不包括系统头文件，详见<a class="xref" href="ch22s04.html#make.header">第 4 节 “自动处理头文件的依赖关系”</a>。</p></dd><dt><span class="term"><code class="literal">-o outfile</code></span></dt><dd><p><code class="literal">outfile</code>输出文件的文件名，详见<a class="xref" href="ch19s02.html#asmc.main">第 2 节 “<code class="literal">main</code>函数和启动例程”</a>。</p></dd><dt><span class="term"><code class="literal">-O?</code></span></dt><dd><p>各种编译优化选项，详见<a class="xref" href="ch19s06.html#asmc.volatile">第 6 节 “volatile限定符”</a>。</p></dd><dt><span class="term"><code class="literal">-print-search-dirs</code></span></dt><dd><p>打印库文件的默认搜索路径，详见<a class="xref" href="ch20s03.html#link.staticlib">第 3 节 “静态库”</a>。</p></dd><dt><span class="term"><code class="literal">-S</code></span></dt><dd><p>编译生成汇编代码，详见<a class="xref" href="ch19s02.html#asmc.main">第 2 节 “<code class="literal">main</code>函数和启动例程”</a>。</p></dd><dt><span class="term"><code class="literal">-v</code></span></dt><dd><p>打印详细的编译链接过程，详见<a class="xref" href="ch19s02.html#asmc.main">第 2 节 “<code class="literal">main</code>函数和启动例程”</a>。</p></dd><dt><span class="term"><code class="literal">-Wall</code></span></dt><dd><p>打印所有的警告信息，详见<a class="xref" href="intro.helloworld.html" title="4. 第一个程序">第 4 节 “第一个程序”</a>。</p></dd><dt><span class="term"><code class="literal">-Wl,options</code></span></dt><dd><p><code class="literal">options</code>是传递给链接器的选项，详见<a class="xref" href="ch20s04.html#link.shared">第 4 节 “共享库”</a>。</p></dd></dl></div><p>2、gdb</p><div class="orderedlist"><ol type="1"><li><p>在<a class="xref" href="ch10.html#gdb">第 10 章 <i>gdb</i></a>集中介绍了<code class="literal">gdb</code>的基本命令和调试方法。</p></li><li><p>在<a class="xref" href="ch19s01.html#asmc.funccall">第 1 节 “函数调用”</a>提到了<code class="literal">gdb</code>的指令级调试和反汇编命令。</p></li><li><p>如果一个程序由多个<code class="literal">.c</code>文件编译链接而成，用<code class="literal">gdb</code>调试时如何定位某个源文件中的某一行代码呢？在<a class="xref" href="ch20s01.html#link.basic">第 1 节 “多目标文件的链接”</a>有介绍。</p></li><li><p>在<a class="xref" href="ch23s06.html#pointer.parray">第 6 节 “指向指针的指针与指针数组”</a>提到了用<code class="literal">gdb</code>调试时如何给程序提供命令行参数。</p></li></ol></div><p>3、其它开发调试工具</p><div class="orderedlist"><ol type="1"><li><p><code class="literal">as</code>，汇编器，用法详见<a class="xref" href="ch18s01.html#asm.simpleasm">例 18.1 “最简单的汇编程序”</a>。</p></li><li><p><code class="literal">ld</code>，链接器，用法详见<a class="xref" href="ch18s01.html#asm.simpleasm">例 18.1 “最简单的汇编程序”</a>，用<code class="literal">--verbose</code>选项可以显示默认链接脚本，详见<a class="xref" href="ch20s01.html#link.basic">第 1 节 “多目标文件的链接”</a>。</p></li><li><p><code class="literal">readelf</code>，读ELF文件信息，用法详见<a class="xref" href="ch18s05.html#asm.relocatable">第 5.1 节 “目标文件”</a>。</p></li><li><p><code class="literal">objdump</code>，显示目标文件中的信息，本书主要用它做反汇编，用法详见<a class="xref" href="ch18s05.html#asm.relocatable">第 5.1 节 “目标文件”</a>。</p></li><li><p><code class="literal">hexdump</code>，以十六进制或ASCII码显示一个文件，用法详见<a class="xref" href="ch18s05.html#asm.relocatable">第 5.1 节 “目标文件”</a>。</p></li><li><p><code class="literal">ar</code>，把目标文件打包成静态库，用法详见<a class="xref" href="ch20s03.html#link.staticlib">第 3 节 “静态库”</a>。</p></li><li><p><code class="literal">ranlib</code>，给<code class="literal">ar</code>打包的静态库建索引，用法详见<a class="xref" href="ch20s03.html#link.staticlib">第 3 节 “静态库”</a>。</p></li><li><p><code class="literal">nm</code>，查看符号表，用法详见<a class="xref" href="ch19s02.html#asmc.main">第 2 节 “<code class="literal">main</code>函数和启动例程”</a>。</p></li></ol></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch26s03.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="pt02.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="pt03.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">3. 哈希表 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 部分 III. Linux系统编程</td></tr></table></div></body></html>
