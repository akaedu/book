<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5. 练习：实现简单的Shell</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C编程一站式学习" /><link rel="up" href="ch30.html" title="第 30 章 进程" /><link rel="prev" href="ch30s04.html" title="4. 进程间通信" /><link rel="next" href="ch31.html" title="第 31 章 Shell脚本" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5. 练习：实现简单的Shell</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch30s04.html">上一页</a> </td><th width="60%" align="center">第 30 章 进程</th><td width="20%" align="right"> <a accesskey="n" href="ch31.html">下一页</a></td></tr></table><hr /></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2868354"></a>5. 练习：实现简单的Shell</h2></div></div></div><p>用讲过的各种C函数实现一个简单的交互式Shell，要求：</p><p>1、给出提示符，让用户输入一行命令，识别程序名和参数并调用适当的<code class="literal">exec</code>函数执行程序，待执行完成后再次给出提示符。</p><p>2、识别和处理以下符号：</p><div class="itemizedlist"><ul type="disc"><li><p>简单的标准输入输出重定向（&lt;和&gt;）：仿照<a class="xref" href="ch30s03.html#process.wrapper">例 30.5 “wrapper”</a>，先<code class="literal">dup2</code>然后<code class="literal">exec</code>。</p></li><li><p>管道（|）：Shell进程先调用<code class="literal">pipe</code>创建一对管道描述符，然后<code class="literal">fork</code>出两个子进程，一个子进程关闭读端，调用<code class="literal">dup2</code>把写端赋给标准输出，另一个子进程关闭写端，调用<code class="literal">dup2</code>把读端赋给标准输入，两个子进程分别调用<code class="literal">exec</code>执行程序，而Shell进程把管道的两端都关闭，调用<code class="literal">wait</code>等待两个子进程终止。</p></li></ul></div><p>你的程序应该可以处理以下命令：</p><div class="literallayout"><p>○ls△-l△-R○&gt;○file1○<br />
○cat○&lt;○file1○|○wc△-c○&gt;○file1○<br />
○表示零个或多个空格，△表示一个或多个空格</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch30s04.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="ch30.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="ch31.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">4. 进程间通信 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 31 章 Shell脚本</td></tr></table></div></body></html>
